#!/usr/bin/env node

var main = require('./trello/main');
var optparse = require('./trello/optparse');

optparse.init('trello_client');
optparse.addOption('--organization', '-o', '获取组织信息', function() {
  getData(main.getOrgs, function(orgs) {
    for(var index in orgs) {
      console.log('%s（%s）', orgs[index].displayName, orgs[index].name);
    }
  });
});
optparse.run();

function getData(call, callback)
{
  try{
    call(getConfigFileName(), callback, errorGetData);

  } catch(e) {
    errorGetData();
  }
}

function errorGetData()
{
  console.log('数据获取失败');
}

function getConfigFileName()
{
  return __dirname + '/../config.json';
}
